# Gitの運用ルール

⚠️ 必ずブランチを切ってからコミットすること！

## ブランチ戦略

基本的には GitHub Flow から `fotfix` と `relase` ブランチを除く、 `main`, `develop`, `feature` の3つを使用する手順を採用する

```
main -> delvelop -> feature
```

- 機能追加する場合は、`develop` ブランチから、 `feature/バックログのチケット番号/プレフィックス&機能名` でブランチを切って作成する
- ブランチ名は `-` で繋いで作成する

（例 ログイン機能を実装

```
faeture/1/add-login-to-user
```

## コミット

- コミット粒度はプレフィックス基準で行う
    - 一つのコミットに全てまとめるなどはレビュワーの負担になるのでNG
- コミットメッセージにはプレフィックスをつける 
    - `git commit -m "update: ユーザー名の表示ロジックを変更"`

```
- プレフィックスの種類
    - 作成: create
    - 更新: update
    - 削除: delete
    - リファクタ: refactor
    - テスト: test
    - ドキュメント: document 
```

## プルリク作成のルール

必ず以下の内容を記述すること

- チケットリンク
- このプルリクの内容はどういうものか
- なぜこの機能が必要なのか
- その他動作確認のURLや注意点などあれば補足に書く

（例 テンプレート

```
# チケット
https://forsisdev.backlog.com/view/READYPRO-1

# これはなに

# なぜやるの

# 補足
```

## レビュー手順

⚠️ 必ず、CIのテストが全て通ったのを確認してからレビューを依頼すること！

- GitHub のプルリク画面から Reviewers に担当者を設定する
- Slack でレビューを依頼する

### レビュー修正依頼があった場合

- レビューコメントに返答or了承だけの場合はスタンプを付ける
- 修正した箇所に該当するコミットに `--fixup` をつける
    - 再度レビューを依頼する
        - LGTMをもらった時点で `git rebase -i` で修正したコミットを元のコミットと統合して再度プッシュする
        - `git rebase -i 結合元のコミットのひとつ前のコミットID`
        - `結合するコミットをfixup（f）する`
        - `再度プッシュする（-fつけて）`
            - 参考: https://ttmmjm.hatenablog.com/entry/2017/11/01/033318
    